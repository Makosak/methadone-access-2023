"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_relay-route_RelayRoute_tsx"],{69202:(e,t,r)=>{let n;r.d(t,{G:()=>E});var s=r(21461);let AliveSession=class AliveSession extends s.AliveSession{getUrlFromRefreshUrl(){return i(this.refreshUrl)}constructor(e,t,r,n){super(e,()=>this.getUrlFromRefreshUrl(),r,n),this.refreshUrl=t}};async function i(e){let t=await a(e);return t&&t.url&&t.token?o(t.url,t.token):null}async function a(e){let t=await fetch(e,{headers:{Accept:"application/json"}});if(t.ok)return t.json();if(404===t.status)return null;throw Error("fetch error")}async function o(e,t){let r=await fetch(e,{method:"POST",mode:"same-origin",headers:{"Scoped-CSRF-Token":t}});if(r.ok)return r.text();throw Error("fetch error")}var l=r(46263),u=r(4412),c=r(44544),d=r(22490),h=r(71643),p=r(7180);let f="alive";let InvalidSourceRelError=class InvalidSourceRelError extends p.d{};let w=d.Z.createPolicy(f,{createScriptURL:e=>p.O.apply({policy:()=>{if(!(0,h.B)())return e;if(!e.startsWith("/"))throw new InvalidSourceRelError("Alive worker src URL must start with a slash");return e},policyName:f,fallback:e,fallbackOnError:!0})});function b(){return"SharedWorker"in window&&"true"!==(0,c.Z)("localStorage").getItem("bypassSharedWorker")}function y(){let e=document.head.querySelector("link[rel=shared-web-socket-src]")?.getAttribute("href")??"";try{return w.createScriptURL(e)}catch(e){if(e instanceof InvalidSourceRelError)return null;throw e}}function m(){return document.head.querySelector("link[rel=shared-web-socket]")?.href??null}function g(){return document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-refresh-url")??null}function S(){return document.head.querySelector("link[rel=shared-web-socket]")?.getAttribute("data-session-id")??null}function k(e,{channel:t,type:r,data:n}){for(let s of e)s.dispatchEvent(new CustomEvent(`socket:${r}`,{bubbles:!1,cancelable:!1,detail:{name:t,data:n}}))}let v=class AliveSessionProxy{subscribe(e){let t=this.subscriptions.add(...e);t.length&&this.worker.port.postMessage({subscribe:t});let r=new Set(t.map(e=>e.name)),n=e.reduce((e,t)=>{let n=t.topic.name;return(0,s.isPresenceChannel)(n)&&!r.has(n)&&e.add(n),e},new Set);n.size&&this.worker.port.postMessage({requestPresence:Array.from(n)})}unsubscribeAll(...e){let t=this.subscriptions.drain(...e);t.length&&this.worker.port.postMessage({unsubscribe:t});let r=this.presenceMetadata.removeSubscribers(e);this.sendPresenceMetadataUpdate(r)}updatePresenceMetadata(e){let t=new Set;for(let r of e)this.presenceMetadata.setMetadata(r),t.add(r.channelName);this.sendPresenceMetadataUpdate(t)}sendPresenceMetadataUpdate(e){if(!e.size)return;let t=[];for(let r of e)t.push({channelName:r,metadata:this.presenceMetadata.getChannelMetadata(r)});this.worker.port.postMessage({updatePresenceMetadata:t})}online(){this.worker.port.postMessage({online:!0})}offline(){this.worker.port.postMessage({online:!1})}hangup(){this.worker.port.postMessage({hangup:!0})}receive(e){let{channel:t}=e;if("presence"===e.type){let r=this.notifyPresenceDebouncedByChannel.get(t);r||(r=(0,l.D)((e,r)=>{this.notify(e,r),this.notifyPresenceDebouncedByChannel.delete(t)},100),this.notifyPresenceDebouncedByChannel.set(t,r)),r(this.subscriptions.subscribers(t),e);return}this.notify(this.subscriptions.subscribers(t),e)}constructor(e,t,r,n,i){this.subscriptions=new s.SubscriptionSet,this.presenceMetadata=new s.PresenceMetadataSet,this.notifyPresenceDebouncedByChannel=new Map,this.notify=i,this.worker=new SharedWorker(e,`github-socket-worker-v2-${n}`),this.worker.port.onmessage=({data:e})=>this.receive(e),this.worker.port.postMessage({connect:{url:t,refreshUrl:r}})}};async function _(){let e=y();if(!e)return;let t=m();if(!t)return;let r=g();if(!r)return;let n=S();if(!n)return;let s=(()=>{if(b())try{return new v(e,t,r,n,k)}catch(e){}return new AliveSession(t,r,!1,k)})();return window.addEventListener("online",()=>s.online()),window.addEventListener("offline",()=>s.offline()),window.addEventListener("pagehide",()=>{"hangup"in s&&s.hangup()}),s}async function R(){return await u.x,_()}function E(){return n||(n=R())}},83991:(e,t,r)=>{r.d(t,{s:()=>s});var n=r(21461);function s(e,t,r){if(!e)throw Error("Not connected to alive");if(!t)throw Error("No channel name");let s=n.Topic.parse(t);if(!s)throw Error("Invalid channel name");let i={subscriber:{dispatchEvent:e=>{if(e instanceof CustomEvent){let t=e.detail;r(t.data)}}},topic:s};return e.subscribe([i]),{unsubscribe:()=>e.unsubscribeAll(i.subscriber)}}},15754:(e,t,r)=>{r.d(t,{O1:()=>c,ZU:()=>i,d5:()=>o,eN:()=>s,lm:()=>h,th:()=>p});var n=r(86283);let s="GraphQLTraces",i="GraphQLTracingRefresh",a=d();function o(e){if(!n.iG||!l()||!e)return;let t=n.iG;t[s]||(t[s]=[]),e.trace&&(t[s].push(e.trace),"function"==typeof t[i]&&t[i]())}function l(){let e=n.iG;return"true"===new URLSearchParams(n.jX.search).get("_tracing")||void 0!==e[s]}function u(){return a.length>0}function c(e){if(!l()&&!u())return e;let t=new URL(e,n.jX.origin);return l()&&t.searchParams.set("_tracing","true"),u()&&t.searchParams.set("disable_clusters",a.join(",")),t.pathname+t.search}function d(){return decodeURIComponent(new URLSearchParams(n.jX.search).get("disable_clusters")||"").split(",").filter(e=>""!==e)}function h(e){return a.indexOf(e)>-1}function p(e){let t=a.indexOf(e);t>-1?a.splice(t,1):a.push(e);let r=new URLSearchParams(n.jX.search);r.set("disable_clusters",a.join(","));let s=n.jX;s.search=r.toString()}},55946:(e,t,r)=>{r.d(t,{lj:()=>SSRNetwork,rB:()=>M});var n=r(73935),s=r(44311),i=r(41411),a=r.n(i),o=r(15754),l=r(89445);let u=["SAML"];function c(e){if(h(e),"errors"in e&&e.errors.length){let t=e.errors.map(e=>`GraphQL error: ${e.type}: ${e.message} (path: ${e.path})`).join(", ");throw Error(t)}if(!("data"in e))throw Error(`Expected data property in response: ${JSON.stringify(e)}`);return e}async function d(e){if(e.status>=400&&404!==e.status){let t=await e.text();throw Error(`HTTP error (${e.status}): ${t}`)}}function h(e){return"errors"in e&&(e.errors=e.errors.filter(e=>!u.includes(e.type))),e}async function p(e,t,r="GET",n){let s=await f(e,t,r,{isSubscription:!1,scope:void 0},n);return s.response}async function f(e,t,r="POST",n={},s){let i=JSON.stringify(a()({query:e,variables:t})),{isSubscription:l,scope:u}=n,d=w(r,encodeURIComponent(i),l,u,s),{subscriptionId:h,json:p}=await b(d,r,i),f=c(p);return f&&(0,o.d5)(f),{subscriptionId:h,response:f}}function w(e,t,r,n,s="/_graphql"){let i=[];return"GET"===e&&i.push(`body=${t}`),r&&i.push("subscription=1"),n&&i.push(`scope=${encodeURIComponent(n)}`),i.length>0?`${s}?${i.join("&")}`:s}async function b(e,t,r){let n=(0,o.O1)(e);return y(n,t,r)}async function y(e,t,r){let n;n="GET"===t?await fetch(e,{method:t,mode:"no-cors",cache:"no-cache",credentials:"include"}):await (0,l.Q)(e,{method:t,headers:{Accept:"application/json"},...r?{body:r}:void 0}),await d(n);let s=await n.json(),i=n.headers.get("X-Subscription-ID");return{subscriptionId:i,json:s}}let m=[{kind:"linked",handle(e,t,r){if(null!=t&&t.__typename===s.ROOT_TYPE&&"node"===e.name&&r.hasOwnProperty("id"))return r.id}},{kind:"pluralLinked",handle(e,t,r){if(null!=t&&t.__typename===s.ROOT_TYPE&&"nodes"===e.name&&r.hasOwnProperty("ids"))return r.ids}}];var g=r(69202),S=r(83991);function k(e,t){let r=e.id;return s.Observable.create(n=>{let s=()=>{},i=!1;return async function(){if(!r)throw Error("unexpected operation with no id!");let a=e.metadata?.scope,{subscriptionId:o,response:l}=await f(r,t,"GET",{isSubscription:!0,scope:a});l&&n.next(l);try{let e=await (0,g.G)();if(i)return;let t=(0,S.s)(e,o,e=>n.next(e));t?.unsubscribe&&(s=t.unsubscribe)}catch(e){n.error(e)}}(),{get closed(){return i},unsubscribe(){i=!0,s()}}})}var v=r(63840);function _(e){return(0,v.unstable_scheduleCallback)(v.unstable_LowPriority,e)}var R=r(86283);function E({params:e,variables:t,ssrPreloadedQueries:r,baseUrl:n,emitWarning:s}){if(!e.id)throw Error("params has no id property!");if(e.id&&r){let n=JSON.stringify(t),s=r.get(e.id)?.get(n);if(s)return s;e.metadata?.isRelayRouteRequest&&(0,R.cF)()}let i="mutation"===e.operationKind?"POST":"GET";return p(e.id,t,i,n)}let P={cancel:()=>!1,schedule:e=>((0,n.unstable_batchedUpdates)(e),"")};let SSRNetwork=class SSRNetwork{execute(e,t,r){return this.relayNetwork.execute(e,t,r)}constructor(e,t){this.ssrPreloadedData=e,this.warningsShown=new Set,this.relayNetwork=s.Network.create((e,r)=>E({params:e,variables:r,ssrPreloadedQueries:this.ssrPreloadedData,baseUrl:t,emitWarning:e=>{this.warningsShown.has(e)||(this.warningsShown.add(e),console.warn(e))}}),(e,t)=>k(e,t))}};let M=e=>{let t=new SSRNetwork(new Map,e),r=new s.Environment({scheduler:P,store:new s.Store(new s.RecordSource,{gcReleaseBufferSize:50,queryCacheExpirationTime:3e5,gcScheduler:_}),network:t,missingFieldHandlers:m});return r.options={baseUrl:e},r}},39370:(e,t,r)=>{r.d(t,{XT:()=>y,gn:()=>k,Ry:()=>b,yH:()=>m});var n,s,i=r(85893),a=r(24791),o=r(89226);let l=new Map,u=class Resource{load(){return null==this._promise&&(this._promise=this._loader(),(async()=>{try{this._result=await this._promise}catch(e){throw this._error=e,e}})()),this._promise}getModuleId(){return this._moduleId}get(){return this._result}getModuleIfRequired(){return this.get()}read(){if(null!=this._result)return this._result;if(null!=this._error)throw this._error;throw this._promise}constructor(e,t,r=null){this._moduleId=e,this._loader=t,this._error=null,this._promise=null,this._result=r}};function c(e,t,r=null){let n=l.get(e);return null==n&&(n=new u(e,t,r),l.set(e,n)),n}try{(n=c).displayName||(n.displayName="JSResource")}catch{}var d=r(67294),h=r(44311),p=r(55946),f=r(22578);let w=e=>e,b=e=>t=>t[e],y=e=>t=>Number(t[e]),m=()=>e=>e["*"];function g(e,t){let r=Object.fromEntries(Object.entries(e).map(([e,r])=>[e,r(t)]));return r}function S(e,t,r,n){let s=g(e,r),i=t(s,r,n);for(let e in i)if(void 0===i[e])return;return i}function k({path:e,resourceName:t,componentLoader:r,component:n,queryConfigs:s,transformVariables:l=w,title:u,relayEnvironment:b,fallback:y}){function m({params:e,embeddedData:i}){let a=new Map;if(i?.payload?.preloadedQueries)for(let{queryId:e,variables:t,result:r}of i.payload.preloadedQueries){let n=a.get(e);n||(n=new Map);let s=JSON.stringify(t);n.set(s,r),a.set(e,n)}i?.payload?.preloaded_records&&b.getStore().publish(new h.RecordSource(i?.payload?.preloaded_records));let{baseUrl:o}=b.options,d=new p.lj(a,o);b.__setNet(d);let w={root:c(t||n.displayName,r,n),getPreloadProps:e=>({queries:function(e){let t=Object.fromEntries(Object.entries(s).map(([t,{concreteRequest:r,variableMappers:n}])=>{let s=S(n,l,e,b);return function(e,t,r){let n={...r,params:{...r.params,metadata:{...r.params.metadata,isRelayRouteRequest:!0}}};return t?[e,{parameters:n,variables:t}]:[e,void 0]}(t,s,r)}));return function(e){let t={};for(let[r,n]of Object.entries(e))n&&(t[r]=n);return t}(t)}(e)})},y=(0,f.loadEntryPoint)({getEnvironment:()=>b},w,e);return{type:"loaded",data:{entryPointReference:y},title:u}}async function g({params:e}){return Promise.resolve(m({params:e}))}let k=()=>{let e=(0,o.V)(),t=e?.data?.entryPointReference;return t?(0,i.jsx)(f.RelayEnvironmentProvider,{environment:b,children:(0,i.jsx)(d.Suspense,{fallback:y,children:(0,i.jsx)(f.EntryPointContainer,{entryPointReference:t,props:void 0})})}):null};return{path:e,Component:k,coreLoader:g,loadFromEmbeddedData:function({params:e,embeddedData:t}){let{data:r}=m({params:e,embeddedData:t});return{data:r,title:u}},transitionType:a.x.FETCH_THEN_TRANSITION}}try{(s=Wrapper).displayName||(s.displayName="Wrapper")}catch{}}}]);
//# sourceMappingURL=ui_packages_relay-route_RelayRoute_tsx-7df26927bcd3.js.map